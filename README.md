# ğŸ§˜â€â™€ï¸ Moodmend DB í”„ë¡œì íŠ¸

ê°ì • ê¸°ë°˜ ëª…ìƒ ì½˜í…ì¸  ì¶”ì²œ í”Œë«í¼ **Moodmend**ì˜ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ë§ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

&nbsp;

<p align="center">
  <img src="./Moodmend/images/logo/moodmend_logo.png" width="1000" alt="Moodmend Logo"/>
</p>

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”  

- **Moodmend** : ì‚¬ìš©ìê°€ ì§ì ‘ `ê°ì •ì¼ê¸°(Emotion Diary)`ë¥¼ ì‘ì„±í•˜ë©´, ê·¸ ë‚´ìš©ì— ë”°ë¼ ëª…ìƒ ì½˜í…ì¸  ì¤‘ì—ì„œ **ì‚¬ìš©ì ê°ì •ì— ë§ëŠ” ì˜ìƒì´ë‚˜ ìŒì›ì„ ì¶”ì²œ**í•´ì£¼ëŠ” ëª¨ë°”ì¼ ê¸°ë°˜ì˜ ì•±ì…ë‹ˆë‹¤.

- Moodmendì˜ ì„œë¹„ìŠ¤ íë¦„ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ì— ì í•©í•œ **ERD**ë¥¼ ì„¤ê³„í•˜ê³ , **SQL ì¿¼ë¦¬ì™€ í”„ë¡œì‹œì €ê°€ ìš”êµ¬ì‚¬í•­ëŒ€ë¡œ ì •í™•í•˜ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸**í•˜ëŠ” ë° ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“… í”„ë¡œì íŠ¸ ê¸°ê°„  

**2025.06.05 ~ 2025.06.09**

---

## ğŸ¯ ê¸°íš ì˜ë„ ë° ë°°ê²½  
<br>

### <div align="center"> Mood + Amend = _"ê°ì •ì„ ê°œì„ í•˜ë‹¤."_ </div>

<br>

ëª…ìƒì´ë¼ëŠ” ì£¼ì œê°€ ë‹¤ì†Œ ìƒì†Œí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, **ì‚¬ìš©ì ì°¸ì—¬ë¥¼ ë†’ì´ê³  í”Œë«í¼ì˜ ì§€ì†ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´** ë‹¤ì–‘í•œ ë¶€ê°€ ê¸°ëŠ¥ë„ í•¨ê»˜ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

- í‹°ì²˜ (ëª…ìƒ ì œì‘ì)ë¥¼ ìœ„í•œ ë””ì§€í„¸ ì½˜í…ì¸  íŒë§¤ ê³µê°„ ë§ˆë ¨
- ëª…ìƒ í´ë˜ìŠ¤ ê°•ì˜ ìˆ˜ê°• ì‹œìŠ¤í…œì„ í†µí•œ ê¾¸ì¤€í•˜ê³  ì²´ê³„ì ì¸ ëª…ìƒ í›ˆë ¨ ê°€ëŠ¥
- ì¶œì„ê³¼ í¬ì¸íŠ¸ ì§€ê¸‰ì„ í†µí•œ ìœ ì € í™•ë³´ ë° ë³´ìƒ ì„œë¹„ìŠ¤
- ì•„ë°”íƒ€, ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ, ì¹œêµ¬ ë§ºê¸° ë“±ì˜ ì¬ë¯¸ ìš”ì†Œ ì¶”ê°€

ì´ëŸ¬í•œ ìš”ì†Œë¥¼ í†µí•´ **ì‚¬ìš©ì ì°¸ì—¬ë¥¼ ìœ ë„í•˜ê³ , ëª…ìƒ ì½˜í…ì¸ ì˜ ì ‘ê·¼ì„±ì„ ë†’ì´ëŠ” ê²ƒ**ì´ í•µì‹¬ ë°©í–¥ì…ë‹ˆë‹¤.

---

## ğŸ§© ê¸°ëŠ¥ êµ¬ì¡° ë° í…Œì´ë¸” ë¶„ë¥˜  

| ë„ë©”ì¸        | ê´€ë ¨ í…Œì´ë¸” |
|---------------|-------------|
| íšŒì›ê´€ë¦¬      | `members`, `friend` |
| ì½˜í…ì¸         | `contents`, `likes`, `downloads`, `emotion`, `owned`, `payment_detail`, `reports` |
| êµ¬ë§¤          | `cart`, `payment`, `payment_detail`, `owned` |
| ì£¼ë¬¸          | `payment`, `payment_detail` |
| í”Œë ˆì´ë¦¬ìŠ¤íŠ¸  | `playlist`, `playlist_detail` |
| ì¬í™”          | `members`, `point_reward` |
| ë³´ìƒ          | `attendance`, `point_reward` |
| ì•„ì´í…œ        | `items`, `owned`, `payment`, `payment_detail`, `cart` |
| ì•„ë°”íƒ€        | `avatar`, `avatar_items_map`, `items`, `post` |
| ê²Œì‹œíŒ        | `post`, `post_likes` |
| ê°ì • ë‹¤ì´ì–´ë¦¬ | `emotion_diary`, `emotion` |
| ëª…ìƒ í´ë˜ìŠ¤   | `meditation_class`, `class_reservation`, `class_feedback` |

---

## ğŸ“ í”„ë¡œì íŠ¸ ì£¼ìš” ì‚°ì¶œë¬¼  

ê° í•­ëª©ì€ í´ë¦­í•˜ì—¬ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- âœ… [ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ](https://docs.google.com/spreadsheets/d/1lFGjxB9mXCP0s3Rz3rKsKB5AYQrcu9vMIBpgAjZERnI/edit#gid=1298947418)  
- âœ… [WBS (Work Breakdown Structure)](https://docs.google.com/spreadsheets/d/1lFGjxB9mXCP0s3Rz3rKsKB5AYQrcu9vMIBpgAjZERnI/edit#gid=0)  
- âœ… [ERD ì„¤ê³„ ì´ë¯¸ì§€ ë³´ê¸°](https://www.erdcloud.com/d/M7TAEEmzaw7qiSWE2)
<br>
<p align="center">
  <img src="./Moodmend/images/ERD/ERD_Moodmend.png" width="2000" alt="Moodmend ERD"/>
</p>

---

## â“ ERD ì„¤ê³„ ì‹œ ê³ ë¯¼í–ˆë˜ ì‚¬í•­ë“¤ê³¼ í•´ê²° ë°©ì•ˆ

---

### 1ï¸âƒ£ ê°ì • ì¹´í…Œê³ ë¦¬ ì¶©ëŒ ë°©ì§€

- ì´ˆê¸° ì„¤ê³„ì—ì„œëŠ” `ê°ì •`ì´ë¼ëŠ” ì¹´í…Œê³ ë¦¬ê°€ ìœ ì €ì˜ `ê°ì • ì¼ê¸°ì¥`ê³¼ í‹°ì²˜(íŒë§¤ì)ì˜ `ëª…ìƒ ì½˜í…ì¸ `
  <br>ëª¨ë‘ì—ì„œ ì¤‘ë³µ ì‚¬ìš©ë˜ë©´ì„œ, **í‚¤ ì¶©ëŒ** ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

- ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ `emotion`ì´ë¼ëŠ” **ê³µí†µ ê°ì • ì¹´í…Œê³ ë¦¬ í…Œì´ë¸”**ì„ ìƒì„±í•˜ê³ ,  
  `emotion_diary`ì™€ `contents`ê°€ ì´ë¥¼ **ê°ê° ì™¸ë˜í‚¤ë¡œ ì°¸ì¡°**í•˜ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

- ì´ êµ¬ì¡°ë¥¼ í†µí•´ ê°ì • ê¸°ì¤€ì˜ **ì¼ê´€ì„±**ì„ í™•ë³´í•˜ê³ ,
  **ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì¶©ëŒ ì—†ì´ ë™ì¼í•œ ê°ì • ê¸°ì¤€**ì„ ì ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

### 2ï¸âƒ£ ì‚¬ìš©ì ë³´ìœ  ë‚´ì—­ `owned` í…Œì´ë¸” ì„¤ê³„

- ì²˜ìŒì—ëŠ” `payment_detail`ë§Œìœ¼ë¡œ ìœ ì €ì˜ ì½˜í…ì¸  ë° ì•„ì´í…œ ë³´ìœ  ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.
  
- ê·¸ëŸ¬ë‚˜ ê²°ì œëŠ” ë‹¨ìˆœí•œ **ì´ë ¥ ì •ë³´**ì´ê³ , ë³´ìœ ëŠ” **í˜„ì¬ ìƒíƒœ**ì´ê¸° ë•Œë¬¸ì— ì´ ë°©ì‹ì€ í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´, ì½˜í…ì¸ ê°€ **í™˜ë¶ˆ**ë˜ê±°ë‚˜, ì•„ì´í…œì˜ **ì‚¬ìš© ê¸°í•œì´ ë§Œë£Œ**ë˜ëŠ” ê²½ìš°  
  ë‹¨ìˆœíˆ ê²°ì œ ë‚´ì—­ë§Œìœ¼ë¡œëŠ” **ì •í™•í•œ ì†Œìœ  ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.**

- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `owned`ë¼ëŠ” **ë³´ìœ  ë‚´ì—­ ì „ìš© í…Œì´ë¸”**ì„ ë³„ë„ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.  
  ì´ í…Œì´ë¸”ì€ `payment_detail`ê³¼ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©°, ìœ ì €ê°€ **í˜„ì¬ ë³´ìœ  ì¤‘ì¸ ì½˜í…ì¸ /ì•„ì´í…œì„ ëª…í™•í•˜ê²Œ ê´€ë¦¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“„ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼

<details>
<summary>â–¶ï¸ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸</summary>

### 01. íšŒì›ê°€ì… í”„ë¡œì‹œì €
<p align="center">
  <img src="./Moodmend/images/Test_Query/R001_íšŒì›ê°€ì….png" width="800" alt="íšŒì›ê°€ì… í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE íšŒì›ê°€ì… (
  IN p_name VARCHAR(20),
  IN p_password VARCHAR(255),
  IN p_phone_number VARCHAR(20),
  IN p_nickname VARCHAR(20),
  IN p_birthday DATE,
  IN p_email VARCHAR(50),
  IN p_role ENUM('Admin', 'Teacher', 'User'),
  IN p_signup_type ENUM('Email', 'Kakao', 'Google', 'Naver')
)
BEGIN
  IF EXISTS (
    SELECT 1 FROM members 
    WHERE phone_number = p_phone_number OR email = p_email
  ) THEN
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ ë˜ëŠ” ì „í™”ë²ˆí˜¸ì…ë‹ˆë‹¤.';
  ELSE
    INSERT INTO members (
      name, password, phone_number, nickname, birthday, email,
      role, signup_type, created_at, updated_at, point
    )
    VALUES (
      p_name, p_password, p_phone_number, p_nickname, p_birthday, p_email,
      p_role, p_signup_type, NOW(), NOW(), 0
    );
  END IF;
END$$

DELIMITER ;
```

### 02. ë¡œê·¸ì¸ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R002_ë¡œê·¸ì¸.png" width="800" alt="ë¡œê·¸ì¸ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ë¡œê·¸ì¸ (
  IN p_login_id VARCHAR(50), -- ì´ë©”ì¼ ë˜ëŠ” ì „í™”ë²ˆí˜¸
  IN p_password VARCHAR(255)
)
BEGIN
  IF EXISTS (
    SELECT 1 FROM members 
    WHERE (email = p_login_id OR phone_number = p_login_id)
      AND password = p_password
  ) THEN
    SELECT members_id, name, nickname FROM members 
    WHERE (email = p_login_id OR phone_number = p_login_id)
      AND password = p_password;
  ELSE
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'ë¡œê·¸ì¸ ì •ë³´ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
  END IF;
END$$

DELIMITER ;


```

### 03. ì½˜í…ì¸  ë“±ë¡ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R003_ì½˜í…ì¸ _ë“±ë¡.png" width="800" alt="ì½˜í…ì¸  ë“±ë¡ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì½˜í…ì¸ _ë“±ë¡(
    IN p_members_id BIGINT,
    IN p_emotion_id BIGINT,
    IN p_name VARCHAR(100),
    IN p_description TEXT,
    IN p_thumbnail TEXT,
    IN p_duration INT,
    IN p_is_premium ENUM('ì¼ë°˜', 'í”„ë¦¬ë¯¸ì—„'),
    IN p_video_url TEXT,
    IN p_price INT UNSIGNED
)
BEGIN
    IF p_is_premium = 'í”„ë¦¬ë¯¸ì—„' AND p_price = 0 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'í”„ë¦¬ë¯¸ì—„ ì½˜í…ì¸ ëŠ” ê°€ê²©ì´ 0ì›ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
    END IF;

    IF p_is_premium = 'ì¼ë°˜' AND p_price != 0 THEN
        SET p_price = 0;
    END IF;

    INSERT INTO contents (
        members_id,
        emotion_id,
        name,
        description,
        thumbnail,
        duration,
        is_premium,
        views,
        price,
        video_url
    ) VALUES (
        p_members_id,
        p_emotion_id,
        p_name,
        p_description,
        p_thumbnail,
        p_duration,
        p_is_premium,
        0,
        p_price,
        p_video_url
    );
END $$

DELIMITER ;

select * from contents;
```

### 04. ì¢‹ì•„ìš” ë“±ë¡ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R004_ì¢‹ì•„ìš”_ëˆ„ë¥´ê¸°.png" width="800" alt="ì¢‹ì•„ìš” ëˆ„ë¥´ê¸° í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì¢‹ì•„ìš”_ë“±ë¡(
    IN p_members_id BIGINT,
    IN p_contents_id BIGINT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì¢‹ì•„ìš” ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ(ë¡¤ë°± ìˆ˜í–‰ë¨)';
    END;

    START TRANSACTION;

    -- ì¤‘ë³µ ì¢‹ì•„ìš” ë°©ì§€: íŠ¸ëœì­ì…˜ ë‚´ì—ì„œë„ í™•ì¸
    IF EXISTS (
        SELECT 1 FROM likes
        WHERE members_id = p_members_id AND contents_id = p_contents_id
        FOR UPDATE
    ) THEN
        ROLLBACK;
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì´ë¯¸ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ì…¨ìŠµë‹ˆë‹¤.';
    END IF;

    INSERT INTO likes (members_id, contents_id)
    VALUES (p_members_id, p_contents_id);

    COMMIT;
END $$

DELIMITER ;
```


### 05. ì¢‹ì•„ìš” ì·¨ì†Œ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R005_ì¢‹ì•„ìš”_ì·¨ì†Œ.png" width="800" alt="ì¢‹ì•„ìš” ì·¨ì†Œ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì¢‹ì•„ìš”_ì·¨ì†Œ(
    IN p_members_id BIGINT,
    IN p_contents_id BIGINT
)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì¢‹ì•„ìš” ì·¨ì†Œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ(ë¡¤ë°± ìˆ˜í–‰ë¨)';
    END;

    START TRANSACTION;

    -- ì¢‹ì•„ìš” ëˆŒë €ëŠ”ì§€ í™•ì¸ ë° ì ê¸ˆ
    IF NOT EXISTS (
        SELECT 1 FROM likes
        WHERE members_id = p_members_id AND contents_id = p_contents_id
        FOR UPDATE
    ) THEN
        ROLLBACK;
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.';
    END IF;

    DELETE FROM likes
    WHERE members_id = p_members_id AND contents_id = p_contents_id;

    COMMIT;
END $$

DELIMITER ;
```

### 06. íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì½˜í…ì¸  ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R006_íŠ¹ì •_ì¹´í…Œê³ ë¦¬_ì½˜í…ì¸ _ì¡°íšŒ.png" width="800" alt="íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì½˜í…ì¸  í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì¹´í…Œê³ ë¦¬ë³„_ì½˜í…ì¸ _ì¡°íšŒ(
    IN p_category VARCHAR(20)
)
BEGIN
    SELECT 
        c.contents_id,
        c.name,
        c.description,
        c.thumbnail,
        c.duration,
        c.price,
        c.is_premium,
        c.upload_at,
        e.emotion_name,
        m.nickname AS creator
    FROM contents c
    JOIN emotion e ON c.emotion_id = e.emotion_id
    JOIN members m ON c.members_id = m.members_id
    WHERE e.emotion_name = p_category;
END $$

DELIMITER ;
```

### 07. ì½˜í…ì¸  ì‹ ê³  í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R007_ì½˜í…ì¸ _ì‹ ê³ .png" width="800" alt="ì½˜í…ì¸  ì‹ ê³  í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì½˜í…ì¸ _ì‹ ê³  (
    IN p_members_id BIGINT,
    IN p_contents_id BIGINT,
    IN p_reason TEXT
)
BEGIN
    IF EXISTS (
        SELECT 1 FROM reports
        WHERE members_id = p_members_id AND contents_id = p_contents_id
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì´ë¯¸ ì‹ ê³ í•œ ì½˜í…ì¸ ì…ë‹ˆë‹¤.';
    END IF;

    INSERT INTO reports (members_id, contents_id, reason, reported_at, status)
    VALUES (p_members_id, p_contents_id, p_reason, NOW(), 'ê²€í†  ì¤‘');
END $$

DELIMITER ;
```

### 08. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R008_ì¥ë°”êµ¬ë‹ˆ_ì¶”ê°€.png" width="800" alt="ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì¥ë°”êµ¬ë‹ˆ_ê´€ë¦¬ (
    IN p_action VARCHAR(20),          -- 'add', 'remove', 'clear'
    IN p_members_id BIGINT,
    IN p_contents_id BIGINT
)
BEGIN
    DECLARE v_is_premium ENUM('ì¼ë°˜', 'í”„ë¦¬ë¯¸ì—„');
    DECLARE v_price INT UNSIGNED;

    IF p_action = 'add' THEN
        -- í”„ë¦¬ë¯¸ì—„ ì—¬ë¶€ ë° ê°€ê²© í™•ì¸
        SELECT is_premium, price INTO v_is_premium, v_price
        FROM contents
        WHERE contents_id = p_contents_id;

        IF v_is_premium != 'í”„ë¦¬ë¯¸ì—„' THEN
            SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'ë¬´ë£Œ ì½˜í…ì¸ ëŠ” ì¥ë°”êµ¬ë‹ˆì— ë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
        END IF;

        -- total í¬í•¨í•˜ì—¬ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
        INSERT IGNORE INTO cart (members_id, contents_id, total)
        VALUES (p_members_id, p_contents_id, v_price);

    ELSEIF p_action = 'remove' THEN
        DELETE FROM cart
        WHERE members_id = p_members_id AND contents_id = p_contents_id;

    ELSEIF p_action = 'clear' THEN
        DELETE FROM cart
        WHERE members_id = p_members_id;
    END IF;
END $$

DELIMITER ;
```

### 09. ì½˜í…ì¸  êµ¬ë§¤ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R009_ì½˜í…ì¸ _êµ¬ë§¤.png" width="800" alt="ì½˜í…ì¸  êµ¬ë§¤ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE ì½˜í…ì¸  êµ¬ë§¤ (
    IN p_members_id BIGINT,
    IN p_payment_method ENUM('ì‹ ìš©ì¹´ë“œ', 'íœ´ëŒ€í°', 'ê³„ì¢Œì´ì²´')
)
BEGIN
    DECLARE v_total INT UNSIGNED;
    DECLARE v_payment_id BIGINT;
    DECLARE v_cart_contents_id BIGINT;
    DECLARE v_cart_items_id BIGINT;

    -- [1] ìœ íš¨í•œ ê²°ì œ ëŒ€ìƒì´ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
    IF NOT EXISTS (
        SELECT 1 FROM cart
        WHERE members_id = p_members_id
          AND ((contents_id IS NOT NULL AND items_id IS NULL) OR (contents_id IS NULL AND items_id IS NOT NULL))
          AND total IS NOT NULL AND total > 0
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ê²°ì œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.';
    END IF;

    -- [2] ìœ íš¨í•œ ë°ì´í„° 1ê°œë¥¼ ê°€ì ¸ì˜´ (ì •í™•í•œ ì¡°ê±´ í¬í•¨)
    SELECT contents_id, items_id, total
    INTO v_cart_contents_id, v_cart_items_id, v_total
    FROM cart
    WHERE members_id = p_members_id
      AND ((contents_id IS NOT NULL AND items_id IS NULL) OR (contents_id IS NULL AND items_id IS NOT NULL))
      AND total IS NOT NULL AND total > 0
    LIMIT 1;

    -- [3] payment í…Œì´ë¸” ê¸°ë¡
    INSERT INTO payment (
        members_id, items_id, payment_method, total_price
    )
    VALUES (
        p_members_id, v_cart_items_id, p_payment_method, v_total
    );

    SET v_payment_id = LAST_INSERT_ID();

    -- [4] ì½˜í…ì¸  ê²°ì œ ì²˜ë¦¬
    IF v_cart_contents_id IS NOT NULL THEN
        INSERT INTO payment_detail (
            contents_id, payment_id, purchase_type, price
        )
        VALUES (
            v_cart_contents_id, v_payment_id, 'ì½˜í…ì¸  êµ¬ë§¤', v_total
        );

        INSERT INTO owned (
            members_id, contents_id, payment_detail_id, source_type
        )
        VALUES (
            p_members_id, v_cart_contents_id, LAST_INSERT_ID(), 'ê²°ì œ'
        );
    END IF;

    -- [5] ì•„ì´í…œ ê²°ì œ ì²˜ë¦¬
    IF v_cart_items_id IS NOT NULL THEN
        INSERT INTO payment_detail (
            items_id, payment_id, purchase_type, price
        )
        VALUES (
            v_cart_items_id, v_payment_id, 'ì•„ì´í…œ êµ¬ë§¤', v_total
        );

        INSERT INTO owned (
            members_id, items_id, payment_detail_id, source_type
        )
        VALUES (
            p_members_id, v_cart_items_id, LAST_INSERT_ID(), 'ê²°ì œ'
        );
    END IF;

    -- [6] ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
    DELETE FROM cart 
    WHERE members_id = p_members_id;
END $$

DELIMITER ;
```

### 10. ìƒì„¸êµ¬ë§¤ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R010_ìƒì„¸êµ¬ë§¤ë‚´ì—­_ì¡°íšŒ.png" width="800" alt="ìƒì„¸êµ¬ë§¤ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ì£¼ë¬¸_ìƒì„¸_ì¡°íšŒ (
    IN p_payment_id BIGINT
)
BEGIN
    SELECT 
        pd.payment_detail_id,
        pd.purchase_type,
        pd.price,
        c.name AS contents_name
    FROM payment_detail pd
    LEFT JOIN contents c ON pd.contents_id = c.contents_id
    WHERE pd.payment_id = p_payment_id;
END $$

DELIMITER ;
```

### 11. í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ìƒì„± í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R011_í”Œë ˆì´ë¦¬ìŠ¤íŠ¸_ìƒì„±(ìˆ˜ë™).png" width="800" alt="í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ìƒì„± í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$

CREATE PROCEDURE í”Œë ˆì´ë¦¬ìŠ¤íŠ¸_ê¸°ëŠ¥ (
    IN p_action VARCHAR(20),
    IN p_members_id BIGINT,
    IN p_playlist_id BIGINT,
    IN p_title VARCHAR(50),
    IN p_description TEXT,
    IN p_is_public BOOLEAN,
    IN p_contents_id BIGINT
)
BEGIN
    IF p_action = 'create' THEN
        INSERT INTO playlist (members_id, title, description, is_public)
        VALUES (p_members_id, p_title, p_description, p_is_public);

    ELSEIF p_action = 'add' THEN
        INSERT INTO playlist_detail (playlist_id, contents_id)
        VALUES (p_playlist_id, p_contents_id);

    ELSEIF p_action = 'remove' THEN
        DELETE FROM playlist_detail
        WHERE playlist_id = p_playlist_id AND contents_id = p_contents_id;

    ELSEIF p_action = 'rename' THEN
        UPDATE playlist
        SET title = p_title, description = p_description
        WHERE playlist_id = p_playlist_id AND members_id = p_members_id;

    ELSEIF p_action = 'visibility' THEN
        UPDATE playlist
        SET is_public = p_is_public
        WHERE playlist_id = p_playlist_id AND members_id = p_members_id;

    ELSEIF p_action = 'share' THEN
        UPDATE playlist
        SET playlist_share = UUID()
        WHERE playlist_id = p_playlist_id AND members_id = p_members_id;

    ELSEIF p_action = 'view' THEN
        SELECT 
            p.playlist_id,
            p.title,
            p.description,
            p.is_public,
            p.playlist_share,
            d.pd_id,
            c.contents_id,
            c.name AS contents_name,
            c.duration,
            c.thumbnail
        FROM playlist p
        LEFT JOIN playlist_detail d ON p.playlist_id = d.playlist_id
        LEFT JOIN contents c ON d.contents_id = c.contents_id
        WHERE p.members_id = p_members_id AND (p_playlist_id IS NULL OR p.playlist_id = p_playlist_id);
    END IF;
END $$

DELIMITER ;

```

### 12. í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ë“±ë¡ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R012_í”Œë ˆì´ë¦¬ìŠ¤íŠ¸_ë“±ë¡.png" width="800" alt="í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ë“±ë¡ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
call moodmend.í”Œë ˆì´ë¦¬ìŠ¤íŠ¸_ê¸°ëŠ¥('create', 3, 1, 'ì„±í›„ì˜ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸', 'ë‚˜ì˜ ëª…ìƒ!', 1, 2);


```

### 13. ì‹ ê·œìœ ì € 100í¬ì¸íŠ¸ ì§€ê¸‰ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R013_ì‹ ê·œìœ ì €_100í¬ì¸íŠ¸_ì§€ê¸‰(ìˆ˜ë™).png" width="800" alt="ì‹ ê·œìœ ì € 100í¬ì¸íŠ¸ ì§€ê¸‰ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$


DELIMITER ;
```

### 14. í¬ì¸íŠ¸ ì§€ê¸‰ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R014_í¬ì¸íŠ¸_ì§€ê¸‰ë‚´ì—­_ì¡°íšŒ.png" width="800" alt="í¬ì¸íŠ¸ ì§€ê¸‰ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
íšŒì›ë“±ë¡ í•˜ë©´ ìë™ìœ¼ë¡œ ì§€ê¸‰
select * from members;
```

### 15. ì•„ì´í…œ ë“±ë¡ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R015_ì•„ì´í…œ_ë“±ë¡(ìˆ˜ë™).png" width="800" alt="ì•„ì´í…œ ë“±ë¡ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
select * from items;
insert into items(members_id, items_name, items_category, items_price, items_desc, items_thumbnail, graphic_source)
values(1, 'ê³±ìŠ¬ë¨¸ë¦¬', 'í—¤ì–´', 50, 'í•œì •íŒì…ë‹ˆë‹¤.', 'url', 'url');
```

### 16. ì•„ì´í…œ êµ¬ë§¤ ë³´ìœ ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R016_ì•„ì´í…œêµ¬ë§¤_ë³´ìœ ë‚´ì—­ì¡°íšŒ.png" width="800" alt="ì•„ì´í…œ êµ¬ë§¤ ë³´ìœ ë‚´ì—­ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
call moodmend.ë³´ìœ ë‚´ì—­ì¡°íšŒ(3);
```



### 17. ì•„ë°”íƒ€ ë“±ë¡ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R017_ì•„ë°”íƒ€_ë“±ë¡.png" width="800" alt="ì•„ë°”íƒ€ ë“±ë¡ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ì•„ë°”íƒ€_ì¡°íšŒ_ìˆ˜ì •_ë“±ë¡ (
    IN p_members_id BIGINT,
    IN p_avatar_name VARCHAR(50),
    IN p_is_default BOOLEAN
)
BEGIN
    DECLARE v_exists INT;

    START TRANSACTION;

    -- ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    SELECT COUNT(*) INTO v_exists
    FROM avatar
    WHERE members_id = p_members_id;

    -- ìˆ˜ì • ë˜ëŠ” ë“±ë¡
    IF v_exists > 0 THEN
        UPDATE avatar
        SET avatar_name = p_avatar_name,
            is_default = p_is_default
        WHERE members_id = p_members_id;
    ELSE
        INSERT INTO avatar (members_id, avatar_name, is_default)
        VALUES (p_members_id, p_avatar_name, p_is_default);
    END IF;

    -- ì¡°íšŒ ê²°ê³¼ ë°˜í™˜
    SELECT *
    FROM avatar
    WHERE members_id = p_members_id;

    COMMIT;
END$$


DELIMITER ;
```

### 18. ê²Œì‹œíŒ ë“±ë¡, ê²Œì‹œíŒ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R018_ê²Œì‹œíŒ_ë“±ë¡_ê²Œì‹œíŒ_ì¡°íšŒ.png" width="800" alt="ê²Œì‹œíŒ ë“±ë¡, ê²Œì‹œíŒ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ê²Œì‹œíŒ_ë“±ë¡ (
  IN p_members_id BIGINT,
  IN p_title VARCHAR(50),
  IN p_text TEXT,
  IN p_category VARCHAR(10),
  IN p_is_anonymous BOOLEAN
)
BEGIN
  DECLARE v_avatar_id BIGINT;

  -- ìœ íš¨ ì¹´í…Œê³ ë¦¬ ê²€ì‚¬
  IF p_category NOT IN ('ê³ ë¯¼', 'ì§ˆë¬¸', 'ì¢‹ì€ê¸€', 'ììœ ') THEN
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì‹œê¸€ ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.';
  END IF;

  -- ì•„ë°”íƒ€ ì¡´ì¬ í™•ì¸
  IF NOT EXISTS (
    SELECT 1 FROM avatar WHERE members_id = p_members_id
  ) THEN
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'í•´ë‹¹ ë©¤ë²„ëŠ” ë“±ë¡ëœ ì•„ë°”íƒ€ê°€ ì—†ìŠµë‹ˆë‹¤.';
  END IF;

  -- ì•„ë°”íƒ€ ID ì¡°íšŒ
  SELECT avatar_id INTO v_avatar_id
  FROM avatar
  WHERE members_id = p_members_id
  LIMIT 1;

  -- ê²Œì‹œê¸€ ë“±ë¡
  INSERT INTO post (
    members_id, avatar_id, title, text, category, is_anonymous, created_at, updated_at
  ) VALUES (
    p_members_id, v_avatar_id, p_title, p_text, p_category, p_is_anonymous, NOW(), NOW()
  );
END$$

DELIMITER ;
```


### 19. ê°ì • ë‹¤ì´ì–´ë¦¬ ê¸°ë¡, ê°ì • ë‹¤ì´ì–´ë¦¬ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R019_ê°ì •_ë‹¤ì´ì–´ë¦¬_ê¸°ë¡_ë‹¤ì´ì–´ë¦¬_ì¡°íšŒ_ì…€ë ‰íŠ¸ë¬¸.png" width="800" alt="ê°ì • ë‹¤ì´ì–´ë¦¬ ê¸°ë¡, ë‹¤ì´ì–´ë¦¬ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ê°ì •_ë‹¤ì´ì–´ë¦¬_ê¸°ë¡ (
    IN p_members_id BIGINT,
    IN p_emotion_id BIGINT,
    IN p_intensity TINYINT,
    IN p_title VARCHAR(255),
    IN p_contents TEXT
)
BEGIN
    IF EXISTS (
        SELECT 1 FROM emotion_diary 
        WHERE members_id = p_members_id AND logged_at = CURRENT_DATE
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì˜¤ëŠ˜ì€ ì´ë¯¸ ê°ì • ë‹¤ì´ì–´ë¦¬ë¥¼ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤.';
    END IF;

    INSERT INTO emotion_diary (
        members_id,
        emotion_id,
        title,
        contents,
        logged_at
    ) VALUES (
        p_members_id,
        p_emotion_id,
        p_title,
        p_contents,
        CURRENT_DATE
    );

    UPDATE emotion
    SET intensity = p_intensity
    WHERE emotion_id = p_emotion_id;
END $$

DELIMITER ;
select * from emotion_diary;
```

### 20. ê°ì • ê¸°ë°˜ ì½˜í…ì¸  ì¶”ì²œ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R020_ê°ì •ê¸°ë°˜_ì½˜í…ì¸ _ì¶”ì²œ.png" width="800" alt="ê°ì •ê¸°ë°˜ ì½˜í…ì¸  ì¶”ì²œ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ê°ì •_ê¸°ë°˜_ì½˜í…ì¸ _ì¶”ì²œ (
    IN p_members_id BIGINT
)
BEGIN
    DECLARE v_emotion_id BIGINT;

    SELECT emotion_id INTO v_emotion_id
    FROM emotion_diary
    WHERE members_id = p_members_id
    ORDER BY logged_at DESC
    LIMIT 1;

    SELECT 
        c.contents_id,
        c.name,
        c.description,
        c.thumbnail,
        c.duration,
        c.price,
        c.is_premium
    FROM contents c
    WHERE c.emotion_id = v_emotion_id
    ORDER BY upload_at DESC;
END $$

DELIMITER ;
```

### 21. ì¶œì„ê¸°ë¡, ì¶œì„ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R021_ì¶œì„ê¸°ë¡_ì¶œì„ì¡°íšŒ.png" width="800" alt="ì¶œì„ê¸°ë¡, ì¶œì„ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE ì¶œì„_ê¸°ë¡ (
    IN p_members_id BIGINT
)
BEGIN
    IF EXISTS (
        SELECT 1 FROM attendance 
        WHERE members_id = p_members_id AND attendance_date = CURRENT_DATE
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¶œì„í•˜ì…¨ìŠµë‹ˆë‹¤.';
    END IF;

    INSERT INTO attendance (members_id, attendance_date)
    VALUES (p_members_id, CURRENT_DATE);
END $$
DELIMITER ;
DELIMITER $$

CREATE PROCEDURE ì¶œì„_ì¡°íšŒ (
    IN p_members_id BIGINT
)
BEGIN
    SELECT 
        attendance_id,
        attendance_date
    FROM attendance
    WHERE members_id = p_members_id
    ORDER BY attendance_date DESC;
END $$
DELIMITER ;
```

### 22. í´ë˜ìŠ¤ ê°œì„¤ ë° ìƒíƒœì„¤ì • í´ë˜ìŠ¤ ì¡°íšŒ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R022_í´ë˜ìŠ¤_ê°œì„¤_ë°_ìƒíƒœì„¤ì •_í´ë˜ìŠ¤_ì¡°íšŒ.png" width="800" alt="í´ë˜ìŠ¤ ê°œì„¤ ë° ìƒíƒœì„¤ì • í´ë˜ìŠ¤ ì¡°íšŒ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE í´ë˜ìŠ¤_ê°œì„¤_ë°_ìƒíƒœì„¤ì • (
    IN p_members_id BIGINT,
    IN p_title VARCHAR(50),
    IN p_category VARCHAR(20),
    IN p_start_time DATETIME,
    IN p_end_time DATETIME,
    IN p_limit INT
)
BEGIN
    DECLARE v_now DATETIME;
    DECLARE v_status ENUM('ê°œê°•ì „','ëª¨ì§‘ì¤‘','ì •ì›ì´ˆê³¼','ëª¨ì§‘ì™„ë£Œ');

    SET v_now = NOW();

    IF p_start_time > v_now THEN
        SET v_status = 'ëª¨ì§‘ì¤‘';
    ELSE
        SET v_status = 'ê°œê°•ì „';
    END IF;

    INSERT INTO meditation_class (
        members_id, title, category,
        start_time, end_time, `limit`, status
    ) VALUES (
        p_members_id, p_title, p_category,
        p_start_time, p_end_time, p_limit, v_status
    );
END $$

DELIMITER ;
DELIMITER $$

CREATE PROCEDURE í´ë˜ìŠ¤_ì¡°íšŒ()
BEGIN
    SELECT 
        mc.meditation_class_id,
        mc.title,
        mc.category,
        mc.start_time,
        mc.end_time,
        mc.limit,
        mc.status,
        m.nickname AS teacher
    FROM meditation_class mc
    JOIN members m ON mc.members_id = m.members_id
    ORDER BY mc.start_time DESC;
END $$

DELIMITER ;
```


### 23. í´ë˜ìŠ¤ ì‹ ì²­ í”„ë¡œì‹œì €

<p align="center">
  <img src="./Moodmend/images/Test_Query/R023_í´ë˜ìŠ¤_ì‹ ì²­_ì…€ë ‰íŠ¸ë¬¸.png" width="800" alt="í´ë˜ìŠ¤ ì‹ ì²­ í”„ë¡œì‹œì € í…ŒìŠ¤íŠ¸ ê²°ê³¼"/>
</p>

```sql
DELIMITER $$
CREATE PROCEDURE í´ë˜ìŠ¤_ì‹ ì²­ (
    IN p_members_id BIGINT,
    IN p_meditation_class_id BIGINT
)
BEGIN
    DECLARE v_count INT;

    -- í˜„ì¬ ì˜ˆì•½ ì¸ì› ìˆ˜ í™•ì¸
    SELECT COUNT(*) INTO v_count
    FROM class_reservation
    WHERE meditation_class_id = p_meditation_class_id;

    -- ì¤‘ë³µ ì˜ˆì•½ ì—¬ë¶€ í™•ì¸
    IF EXISTS (
        SELECT 1 FROM class_reservation
        WHERE members_id = p_members_id
          AND meditation_class_id = p_meditation_class_id
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì´ë¯¸ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì‹ ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.';
    END IF;

    -- ì •ì› ì´ˆê³¼ ì—¬ë¶€ í™•ì¸ (limit ì˜ˆì•½ì–´ ì²˜ë¦¬)
    IF v_count >= (
        SELECT `limit` FROM meditation_class
        WHERE meditation_class_id = p_meditation_class_id
    ) THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ì •ì›ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.';
    END IF;

    -- ì˜ˆì•½ ë“±ë¡
    INSERT INTO class_reservation (meditation_class_id, members_id)
    VALUES (p_meditation_class_id, p_members_id);
END $$

DELIMITER ;
```

</details>

---


## ğŸ’¡ ê¸°ëŒ€ íš¨ê³¼  

- ê°ì • ê¸°ë°˜ ì½˜í…ì¸  íë ˆì´ì…˜ìœ¼ë¡œ **ì¶”ì²œ ì •í™•ë„ í–¥ìƒ**  
- ì¶œì„, í¬ì¸íŠ¸, ë³´ìƒ, ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì„ í†µí•´ **ì§€ì†ì ì¸ ì‚¬ìš©ì ì°¸ì—¬ ìœ ë„**  
- **ëª…ìƒ ì½˜í…ì¸  ì†Œë¹„ ë° í™•ì‚° ê¸°ë°˜ ë§ˆë ¨**

---

## ğŸ”¨ ê¸°ìˆ  ìŠ¤íƒ  

<p align="left">
  <img src="https://img.shields.io/badge/ERDCloud-1F1F1F?style=for-the-badge&logo=cloud&logoColor=white" />
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white" />
  <img src="https://img.shields.io/badge/MARIADB-003545?style=for-the-badge&logo=mariadb&logoColor=white" />
  <img src="https://img.shields.io/badge/MYSQL-005C84?style=for-the-badge&logo=mysql&logoColor=white" />
  <img src="https://img.shields.io/badge/MySQL%20Workbench-4479A1?style=for-the-badge&logo=mysql&logoColor=white" />
  <img src="https://img.shields.io/badge/GIT-F05032?style=for-the-badge&logo=git&logoColor=white" />
  <img src="https://img.shields.io/badge/GITHUB-181717?style=for-the-badge&logo=github&logoColor=white" />
</p>

---

## ğŸ‘¥ íŒ€ì› ë° ì—­í•  ë¶„ì¥  

<table>
  <tr>
    <th>ì´ë¦„</th>
    <th>ì—­í• </th>
  </tr>
  <tr>
    <td align="center">
      <img src="/Moodmend/images/Profile/ì„ì„±í›„.png" width="80"/><br/>
      <a href="https://github.com/dev-s3lim" target="_blank" style="text-decoration: none; color: inherit;">
        ì„ì„±í›„
      </a>
    </td>
    <td>
      <code>ê¸°íš</code>, <code>ìš”êµ¬ì‚¬í•­ì„œ ì‘ì„±</code>, <code>WBS ì‘ì„±</code>, <code>ERD ì„¤ê³„</code>, <code>DDL ë° DML ì‘ì„±</code>,  
      <code>GitHub ë°°í¬</code>, <code>í…ŒìŠ¤íŠ¸</code>, <code>ReadMe</code>, <code>ë°œí‘œ</code>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="/Moodmend/images/Profile/ì¡°ë¯¼í˜•.png" width="80"/><br/>
      <a href="https://github.com/jominhyeong97" target="_blank" style="text-decoration: none; color: inherit;">
        ì¡°ë¯¼í˜•
      </a>
    </td>
    <td>
      <code>ê¸°íš</code>, <code>ìš”êµ¬ì‚¬í•­ì„œ ì‘ì„±</code>, <code>WBS ì‘ì„±</code>, <code>ERD ì„¤ê³„</code>, <code>DDL ë° DML ì‘ì„±</code>,  
      <code>GitHub ë°°í¬</code>, <code>í…ŒìŠ¤íŠ¸</code>, <code>ReadMe</code>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="/Moodmend/images/Profile/ì´ìŠ¹ì§€.png" width="80"/><br/>
      <a href="https://github.com/SeungJi20" target="_blank" style="text-decoration: none; color: inherit;">
        ì´ìŠ¹ì§€
      </a>
    </td>
    <td>
      <code>ê¸°íš</code>, <code>ìš”êµ¬ì‚¬í•­ì„œ ì‘ì„±</code>, <code>WBS ì‘ì„±</code>, <code>ERD ì„¤ê³„</code>, <code>DDL ë° DML ì‘ì„±</code>,  
      <code>GitHub ë°°í¬</code>, <code>í…ŒìŠ¤íŠ¸</code>, <code>ReadMe</code>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="/Moodmend/images/Profile/ê¹€ì§€í˜„.png" width="80"/><br/>
      <a href="https://github.com/userkimjihyeon" target="_blank" style="text-decoration: none; color: inherit;">
        ê¹€ì§€í˜„
      </a>
    </td>
    <td>
      <code>ê¸°íš</code>, <code>ìš”êµ¬ì‚¬í•­ì„œ ì‘ì„±</code>, <code>WBS ì‘ì„±</code>, <code>ERD ì„¤ê³„</code>, <code>DDL ë° DML ì‘ì„±</code>,  
      <code>GitHub ë°°í¬</code>, <code>í…ŒìŠ¤íŠ¸</code>
    </td>
  </tr>
</table>




---

> â€œë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ë‹®ì€ í”Œë«í¼ - Moodmendâ€

---

<p align="center"><strong>Moodmend Â· ê°ì • ì¤‘ì‹¬ ëª…ìƒ ì½˜í…ì¸  í”Œë«í¼ DB ì„¤ê³„ í”„ë¡œì íŠ¸</strong></p>
<p align="center"><em>ë³¸ ë¬¸ì„œëŠ” Team Moodmendê°€ ì„±ì‹¤íˆ ì„¤ê³„í•˜ê³  ì œì¶œí•œ ê²°ê³¼ë¬¼ì…ë‹ˆë‹¤.</em></p>
<p align="center"><strong>ê°ì‚¬í•©ë‹ˆë‹¤.</strong></p>
